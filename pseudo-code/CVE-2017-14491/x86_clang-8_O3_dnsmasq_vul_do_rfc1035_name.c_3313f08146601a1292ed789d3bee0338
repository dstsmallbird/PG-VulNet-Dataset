_BYTE *__cdecl do_rfc1035_name(_BYTE *a1, char *a2)
{
  char *v2; // edi
  _BYTE *v3; // ecx
  char v4; // dl
  _BYTE *result; // eax
  char v6; // bl
  char *i; // esi

  v2 = a2;
  v3 = a1;
  if ( !a2 )
    return a1;
  while ( 1 )
  {
    v4 = *v2;
    if ( !*v2 )
      break;
    result = v3 + 1;
    v6 = 0;
    for ( i = v2 + 1; v4; ++result )
    {
      if ( v4 == 46 )
        break;
      *result = v4;
      v4 = *i++;
      ++v6;
    }
    *v3 = v6;
    v2 = i - 1;
    if ( *(i - 1) )
      v2 = i;
    v3 = result;
    if ( !v2 )
      return result;
  }
  return v3;
}
